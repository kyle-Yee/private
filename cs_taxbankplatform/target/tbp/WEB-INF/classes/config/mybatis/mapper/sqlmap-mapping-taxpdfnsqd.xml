<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dcits.govsbu.sd.taxbankplatform.taxpdf.mapper.TaxPdfNsqdMapper" >
<cache type="org.mybatis.caches.ehcache.LoggingEhcache"/> 
  <resultMap id="BaseResultMap" type="com.dcits.govsbu.sd.taxbankplatform.taxpdf.model.TaxPdfNsqdEntity" >
	<!-- 纳税清单 -->
	<collection property="nsqdEntity" column="id" ofType="com.dcits.govsbu.sd.taxbankplatform.taxpdf.model.NsqdEntity">
	<id column="tpn_id" property="id"  />
    <result column="tpn_nf" property="tpnNf"  />
    <result column="tpn_zzs" property="tpnZzs"  />
    <result column="tpn_qysds" property="tpnQysds"  />
    <result column="tpn_cswfjs" property="tpnCswfjs"  />
    <result column="tpn_yhs" property="tpnYhs" />
    <result column="tpn_cztdsy" property="tpnCztdsy" />
    <result column="tpn_jyffj" property="tpnJyffj" />
    <result column="tpn_dfjyfj" property="tpnDfjyfj"  />
    <result column="tpn_sljszx" property="tpnSljszx" />
    <result column="tpn_qtsr" property="tpnQtsr"  />
    <result column="tpn_total" property="tpnTotal"  />
    </collection>
    <!-- 增值税销售额分析数据 -->
    <collection property="zzsxsefxEntity" column="id" ofType="com.dcits.govsbu.sd.taxbankplatform.taxpdf.model.ZzsxsefxEntity">
	    <id column="tpzf_id" property="id" />
	    <result column="tpzf_yf" property="tpzfYf"  />
	    <result column="tpzf_c" property="tpzfC"  />
	    <result column="tpzf_p" property="tpzfP"  />
	    <result column="tpzf_n" property="tpzfN"  />
	    <result column="tpzf_pc" property="tpzfPc" />
	    <result column="tpzf_pn" property="tpzfPn"  />
    </collection>
    <!-- 所得税营业额收入分析数据 -->
    <collection property="sdsyyesrfxEntity" column="id" ofType="com.dcits.govsbu.sd.taxbankplatform.taxpdf.model.SdsyyesrfxEntity">
	    <id column="tpsf_id" property="id" />
	    <result column="tpsf_yf" property="tpsfYf"  />
	    <result column="tpsf_c" property="tpsfC"  />
	    <result column="tpsf_p" property="tpsfP"  />
	    <result column="tpsf_n" property="tpsfN"  />
	    <result column="tpsf_pc" property="tpsfPc"  />
	    <result column="tpsf_pn" property="tpsfPn" />
    </collection>
    <!-- 增值税纳税情况（增值税一般纳税人） -->
    <collection property="zzsnsEntity" column="id" ofType="com.dcits.govsbu.sd.taxbankplatform.taxpdf.model.ZzsnsEntity">
	    <id column="tpz_id" property="id"  />
	    <result column="tpz_nf" property="tpzNf" />
	    <result column="tpz_yf" property="tpzYf"  />
	    <result column="tpz_xse" property="tpzXse"  />
	    <result column="tpz_xxse" property="tpzXxse"  />
	    <result column="tpz_jxse" property="tpzJxse"  />
	    <result column="tpz_ynse" property="tpzYnse"  />
	    <result column="tpz_ydkse" property="tpzYdkse"  />
	    <result column="tpz_sjse" property="tpzSjse"  />
    </collection>
    <!-- 所得税月季纳税情况 -->
    <collection property="sdsnsqkEntity" column="id" ofType="com.dcits.govsbu.sd.taxbankplatform.taxpdf.model.SdsnsqkEntity">
	   <id column="tps_id"  property="id" />
	   <result column="tps_nf"  property="tpsNf" />
	   <result column="tps_yf"  property="tpsYf" />
	   <result column="tps_yssr"  property="tpsYssr" />
	   <result column="tps_lrze"  property="tpsLrze" />
	   <result column="tps_sjlre"  property="tpsSjlre" />
	   <result column="tps_ynse"  property="tpsYnse" />
	   <result column="tps_ydkjms"  property="tpsYdkjms" />
	   <result column="tps_sjse"  property="tpsSjse" />
    </collection>
    <collection property="jtnsqdEntity" column="id" ofType="com.dcits.govsbu.sd.taxbankplatform.taxpdf.model.JtnsqdEntity">
	    <id column="tpj_id" property="id"  />
	    <result column="tpj_nf" property="tpjNf" />
	    <result column="tpj_yf" property="tpjYf"  />
	    <result column="tpj_zsxmdm" property="tpjZsxmdm"  />
	    <result column="tpj_ynsde" property="tpjYnsde"  />
	    <result column="tpj_ynse" property="tpjYnse"  />
	    <result column="tpj_sjse" property="tpjSjse" />
    </collection>
  </resultMap>
  <!-- 纳税清单 -->
	<select id="findByDjxh" resultMap="BaseResultMap" flushCache="true" useCache="true">
	<!-- SELECT 
	<include refid="Base_Column_List" />
  	 	FROM tb_nsryhxx tnx
		LEFT JOIN t_tax_yjsf tty ON tnx.nsryhxx_djxh = tty.djxh
		WHERE tnx.nsryhxx_djxh = #{djxh} -->
		select tpn_nf,tpn_zzs,tpn_qysds,tpn_cswfjs,tpn_yhs,tpn_cztdsy,tpn_jyffj,tpn_dfjyfj,tpn_sljszx,tpn_qtsr,tpn_total
		from t_tax_pdf_nsqd order by tpn_nf;
	</select >
	<!-- 增值税销售额分析 -->
	<select id="findZesxsefx" resultMap="BaseResultMap" flushCache="true" useCache="true">
		select tpzf_yf,tpzf_c,tpzf_p,tpzf_n,tpzf_pc,tpzf_pn
		from t_tax_pdf_zzsxsefx order by tpzf_yf;
	</select >
	<!-- 所得税营业额收入分析数据 -->
	<select id="findSdsyyesrfx" resultMap="BaseResultMap" flushCache="true" useCache="true">
		select tpsf_yf,tpsf_c,tpsf_p,tpsf_n,tpsf_pc,tpsf_pn
		from t_tax_pdf_sdsyyesrfx order by tpsf_yf;
	</select >
	<!-- 增值税纳税情况（增值税一般纳税人） -->
	<select id="findZzsns" resultMap="BaseResultMap" flushCache="true" useCache="true">
		select tpz_nf,tpz_yf,tpz_xse,tpz_xxse,tpz_jxse,tpz_ynse,tpz_ydkse,tpz_sjse
		from t_tax_pdf_zzsns order by tpz_nf,tpz_yf;
	</select >
	<!-- 所得税月季纳税情况 -->
	<select id="findSdsnsqk" resultMap="BaseResultMap" flushCache="true" useCache="true">
		select tps_nf,tps_yf,tps_yssr,tps_lrze,tps_sjlre,tps_ynse,tps_ydkjms,tps_sjse
		from t_tax_pdf_sdsnsqk order by tps_nf,tps_yf;
	</select >
	
		<!-- 具体缴税综合清单 -->
	<select id="findJtnsqd" parameterType="String" resultMap="BaseResultMap" flushCache="true" useCache="true">
		select tpj_nf,tpj_yf,tpj_zsxmdm,tpj_ynsde,tpj_ynse,tpj_sjse
		from t_tax_pdf_jtnsqd where tpj_zsxmdm = #{tpjZsxmdm} order by tpj_nf,tpj_yf;;
	</select >
	<!-- 增值税纳税情况（增值税一般纳税人） -->
	 <select id="zzsnsqkPrcdure" parameterType="map" statementType="CALLABLE" resultType="INTEGER">  
	   {call sp_zzsnsqk(#{djxh},#{sqxh})}  
	 </select> 
	<!-- 所得税月季纳税情况（A表） -->
	 <select id="sdsyjnsqkPrcdure" parameterType="map" statementType="CALLABLE" resultType="INTEGER">  
	   {call sp_sdsyjnsqk(#{djxh},#{sqxh})}  
	 </select>
	 <!-- 纳税清单 -->
	 <select id="nsqdPrcdure" parameterType="map" statementType="CALLABLE" resultType="INTEGER">  
	   {call sp_nsqd(#{djxh},#{sqxh})}  
	 </select>
	 <!-- 具体的税种入库 -->
	 <select id="jtszPrcdure" parameterType="map" statementType="CALLABLE" resultType="INTEGER">  
	   {call sp_jtsz(#{djxh},#{sqxh})}  
	 </select>
	 <!-- 所得税营业收入分析 -->
	 <select id="sdsyyefxPrcdure" parameterType="map" statementType="CALLABLE" resultType="INTEGER">  
	   {call sp_sdsyyefx(#{djxh},#{sqxh})}  
	 </select>
	 <!-- 计算近两年的总纳税额度 -->
	 <select id="znsedPrcdure" parameterType="String" statementType="CALLABLE" resultType="Decimal">  
	   {call sp_znsed(#{sqxh})}  
	 </select>
	 <!-- 增值税销售额分析 -->
	 <select id="zzsxsefxPrcdure" parameterType="map" statementType="CALLABLE" resultType="INTEGER">  
	   {call sp_zzsxsefx(#{djxh},#{sqxh})}  
	 </select>
	 <!-- 短期偿债能力分析 -->
	 <delete id="deleteDxcznlfx" parameterType="String">
	 	DELETE FROM t_tax_pdf_dxcznlfx WHERE tpd_djxh = #{djxh};
	 </delete>
	 
	<!--  具体纳税清单 -->
	 <delete id="deleteJtnsqd" parameterType="String">
	 	DELETE FROM t_tax_pdf_jtnsqd WHERE tpj_djxh = #{djxh};
	 </delete>
	 
	 <!-- 纳税清单 -->
	 <delete id="deleteNsqd" parameterType="String">
	 	DELETE FROM t_tax_pdf_nsqd WHERE tpn_djxh = #{djxh};
	 </delete>
	 
	 <!-- 欠税信息 -->
	 <delete id="deleteQsxx" parameterType="String">
	 	DELETE FROM t_tax_pdf_qsxx WHERE tpq_djxh = #{djxh};
	 </delete>
	 
	 <!-- 所得税纳税情况 -->
	 <delete id="deleteSdsnsqk" parameterType="String">
	 	DELETE FROM t_tax_pdf_sdsnsqk WHERE tps_djxh = #{djxh};
	 </delete>
	 
	 <!-- 所得税营业收入分析 -->
	 <delete id="deleteSdsyyesrfx" parameterType="String">
	 	DELETE FROM t_tax_pdf_sdsyyesrfx WHERE tpsf_djxh = #{djxh};
	 </delete>
	 
	<!--  盈利能力分析 -->
	 <delete id="deleteYlnlfx" parameterType="String">
	 	DELETE FROM t_tax_pdf_ylnlfx WHERE tpy_djxh = #{djxh};
	 </delete>
	 <!-- 营运能力分析 -->
	 <delete id="deleteYynlfx" parameterType="String">
	 	DELETE FROM t_tax_pdf_yynlfx WHERE tpy_djxh = #{djxh};
	 </delete>
	 
	 <!-- 增值税纳税情况 -->
	 <delete id="deleteZzsns" parameterType="String">
	 	DELETE FROM t_tax_pdf_zzsns WHERE tpz_djxh = #{djxh};
	 </delete>
	 <!-- 增值税销售额分析 -->
	 <delete id="deleteZzsxsefx" parameterType="String">
	 	DELETE FROM t_tax_pdf_zzsxsefx WHERE tpzf_djxh = #{djxh};
	 </delete>
</mapper>