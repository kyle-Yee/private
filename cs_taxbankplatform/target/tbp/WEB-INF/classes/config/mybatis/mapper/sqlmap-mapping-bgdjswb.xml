<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dcits.govsbu.sd.taxbankplatform.tbpStatic.mapper.BgdjswbMapper" >
	<resultMap id="BgdjswbEntity" type="com.dcits.govsbu.sd.taxbankplatform.tbpStatic.model.BgdjswbEntity" >
		<id column="b_id" property="id"/>
		<result column="region_id" property="regionId"/>
		<result column="b_fileName" property="fileName"/>
		<result column="b_fileLx" property="fileLx"/>
		<result column="enabled" property="enabled"/>
		<result column="b_url" property="fileUrl"/>
	</resultMap>
  
	<!--添加判断 -->
	<select id="ckByRegionId" parameterType="com.dcits.govsbu.sd.taxbankplatform.tbpStatic.model.BgdjswbEntity" resultType="String" flushCache="true" useCache="true">
		SELECT b_id FROM tb_bgdjswb WHERE region_id = #{regionId} and enabled = 'Y' and b_fileLx = #{fileLx}
	</select>
	
	<!-- 插入数据 -->
	<insert id="insert" parameterType="com.dcits.govsbu.sd.taxbankplatform.tbpStatic.model.BgdjswbEntity" useGeneratedKeys="true" keyProperty="b_id">
		insert into tb_bgdjswb (
			b_id,region_id,b_fileName,b_fileLx,enabled,b_url,creatorid,createtime,updatorid,updatetime
			)   
		values (
			#{id},
			#{regionId},
			#{fileName},
			#{fileLx},
			#{enabled},
			#{fileUrl},
			#{creatorid},
			#{createtime},
			#{updatorid},
			#{updatetime}
			)  
	</insert>
	
	<!-- 搜索数据 -->
	<select id="queryListByPage" parameterType="map" resultMap="BgdjswbEntity" flushCache="true" useCache="true">
		SELECT
		b_id,
		b_fileName,
		enabled
		FROM tb_bgdjswb
		WHERE region_id = #{regionId}
	</select>
	
	<select id="searchFilePath" parameterType="String" resultType="String" flushCache="true" useCache="true">		
		SELECT b_url
		FROM tb_bgdjswb
		WHERE b_id = #{id}
	</select>
	
	<!-- 点击编辑按钮时候查询单条数据 -->
	<select id="findById" parameterType="long" resultMap="BgdjswbEntity" flushCache="true" useCache="true">
		SELECT
		b_id,
		region_id,
		b_fileName,
		b_fileLx,
		enabled,
		b_Url
		FROM tb_bgdjswb
		where b_id = #{id}
	</select>
	
	<!-- 更新数据 -->
	<update id="update" parameterType="com.dcits.govsbu.sd.taxbankplatform.tbpStatic.model.BgdjswbEntity" flushCache="true">
		update tb_bgdjswb
		<set>
			<if test="fileUrl != null and fileUrl != ''">
				b_url = #{fileUrl},
			</if>
			<if test="enabled != null and enabled != ''">
				enabled = #{enabled},
			</if>
			updatorid = #{updatorid},
			updatetime = now()
		</set>
		where b_id = #{id}
	</update>
	
</mapper>