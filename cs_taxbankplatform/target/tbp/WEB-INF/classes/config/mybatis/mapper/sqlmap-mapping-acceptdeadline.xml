<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dcits.govsbu.sd.taxbankplatform.acceptdeadline.mapper.AcceptDeadLineMapper" >
<cache type="org.mybatis.caches.ehcache.LoggingEhcache"/> 
  <resultMap id="BaseResultMap" type="com.dcits.govsbu.sd.taxbankplatform.acceptdeadline.model.AcceptDeadLineEntity" >
    <id column="tl_id" property="id" />
    <result column="region_id" property="regionId"  />
    <result column="org_id" property="orgId" />
    <result column="la_id" property="laId" />
    <result column="tl_total_days" property="tlTotalDays" />
    <result column="create_time" property="createTime" />
    <result column="create_user" property="createUser" />
  </resultMap>
  <sql id="Base_Column_List" >
     tl_id, region_id, org_id, la_id, tl_total_days, create_time, create_user
  </sql>
  <!-- 根据选中的记录查询数据 -->
  <select id="findById" resultMap="BaseResultMap" >
    select 
    <include refid="Base_Column_List" />
    from tb_loan_slsj
    where tl_id = #{id}
  </select>
  
  <!-- 插入数据 -->
  <insert id="insert" parameterType="com.dcits.govsbu.sd.taxbankplatform.acceptdeadline.model.AcceptDeadLineEntity" >
    insert into tb_loan_slsj (tl_id,region_id, org_id, 
      la_id, tl_total_days, create_time, 
      create_user)
    values (#{tl_id},#{regionId}, #{orgId}, 
      #{laId}, #{tlTotalDays}, now(), 
      #{createUser})
  </insert>
  
  <!-- 搜索数据 -->
	<select id="queryListByPage" parameterType="map" resultMap="BaseResultMap" flushCache="true" useCache="true">
		 select 
		    <include refid="Base_Column_List" />
		    from tb_loan_slsj
		<where>
			org_id = #{orgid}
		</where>
	</select>
  <!-- 更新数据 -->
  <update id="update" parameterType="com.dcits.govsbu.sd.taxbankplatform.acceptdeadline.model.AcceptDeadLineEntity" >
    update tb_loan_slsj
    set  
      region_id = #{regionId},
      org_id = #{orgId},
      la_id = #{laId},
      tl_total_days = #{tlTotalDays},
      create_time = now()
    where tl_id = #{id}
  </update>
  
  <!-- 删除数据 -->
	<delete id="deleteBatchById" parameterType="list">
		<![CDATA[  
       delete from tb_loan_slsj where tl_id in
    	]]>  
	    <foreach collection="list" item = "id" open="(" separator="," close=")">
	    #{id}  
	    </foreach>  
	</delete>
  
  <select id="queryListAll" parameterType="map" resultMap="BaseResultMap" flushCache="true" useCache="true">
		select  tl_id, region_id, org_id, la_id, tl_total_days, create_time, create_user 
		ORDER BY tl_id
	</select>
	
	<select id="deadLineCount" parameterType="String" resultType="java.lang.Integer" flushCache="true" useCache="true">
		SELECT COUNT(1) FROM tb_loan_slsj WHERE org_id=#{orgid}
	</select>
	
</mapper>