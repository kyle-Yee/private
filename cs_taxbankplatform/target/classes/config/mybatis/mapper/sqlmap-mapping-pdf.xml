<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dcits.govsbu.sd.taxbankplatform.taxpdf.mapper.PdfMapper" >
  <cache type="org.mybatis.caches.ehcache.LoggingEhcache"/> 
  <resultMap id="pdfMap" type="com.dcits.govsbu.sd.taxbankplatform.taxpdf.model.PdfMapEntity" >
    <id column="tp_id" property="id" />
    <result column="tp_name" property="tpName" />
    <result column="tp_row" property="tpRow" />
    <result column="tp_table" property="tpTable" />
    <result column="tpf_name" property="tpfName" />
	<result column="tpf_table" property="tpfTable" />
    	<collection property="pdfDataItemList" ofType="com.dcits.govsbu.sd.taxbankplatform.taxpdf.model.PdfDataItemEntity">
		    <id column="tpd_id" property="id" />
		    <result column="tpf_name" property="tpfName" />
	    	<result column="tpf_table" property="tpfTable" />
	    </collection>
   </resultMap>
	<select id="findPdfMap" resultMap="pdfMap">
		SELECT tp.tp_id,tp.tp_name,tp.tp_row,tp.tp_table,tpd.tpf_name,tpd.tpf_table
		FROM tb_pdf_map tp
		LEFT JOIN tb_pdf_data_item tpd ON tp.tp_id = tpd.tp_id
	</select>
	
	<!-- 根据省市名称获取对应的region_code -->
	<select id="getRegionCodeByName" parameterType="java.lang.String" resultType="java.lang.String">
		SELECT pc.pc_code FROM tb_province_cities pc WHERE pc.pc_name=#{regionName};
	</select>
</mapper>