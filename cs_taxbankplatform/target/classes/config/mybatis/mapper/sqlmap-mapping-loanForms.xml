<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dcits.govsbu.sd.taxbankplatform.loanForms.mapper.LoanFormsMapper">
	<!--mybatis ehcache缓存配置,以下两个<cache>标签二选一,第一个可以输出日志,第二个不输出日志 -->
	<cache type="org.mybatis.caches.ehcache.LoggingEhcache"/> 
	<!-- <cache type="org.mybatis.caches.ehcache.EhcacheCache"/> -->
	
	
	<resultMap id="LoanFormsMap" type="com.dcits.govsbu.sd.taxbankplatform.loanForms.model.LoanForms">
		<id property="id" column="lf_id"/>
		<result property="orgId" column="org_id" />
		<result property="regionId" column="region_id" />
		<result property="lf_remark" column="lf_remark"/>
		<result column="creatorid" property="creatorid" />
	    <result column="createtime"  property="createtime" />
	    <result column="updatorid" property="updatorid" />
	    <result column="updatetime"  property="updatetime" />
		<result property="la_id" column="la_id"/>
		<result column="fp_id" property="fp_id" />
	</resultMap>

	<!-- 插入数据 -->
	 <insert id="insert" parameterType="com.dcits.govsbu.sd.taxbankplatform.loanForms.model.LoanForms">
	<!--    	<selectKey keyProperty="id" resultType="String" >
  		select LAST_INSERT_ID();
  	   </selectKey> -->
		insert into tb_loan_forms (
			lf_id,
			org_id,
			region_id,
			la_id,
			fp_id,
			lf_remark,
			creatorid,
			createtime, updatorid, updatetime
			)   
		values (
			#{id},
			#{orgId},
			#{regionId},
			#{la_id},
			#{fp_id},
			#{lf_remark},
			#{creatorid},
			#{createtime}, #{updatorid}, #{updatetime}
			)  
	</insert>
	<select id="findById" parameterType="String" resultMap="LoanFormsMap" flushCache="true" useCache="true">
		select * from tb_loan_forms
	    where lf_id = #{id}
	</select>
	<select id="findByFpId" parameterType="String" resultMap="LoanFormsMap" flushCache="true" useCache="true">
		select * from tb_loan_forms
	    where fp_id = #{id}
	</select>
	<select id="queryListByPage" parameterType="map" resultMap="LoanFormsMap" flushCache="true" useCache="true">
		SELECT *
		FROM tb_loan_forms 
		<where>
			<if test="fp_id != null and fp_id != ''">
			fp_id = #{fp_id}
			</if>
		</where>
	</select>
	<update id="update" parameterType="com.dcits.govsbu.sd.taxbankplatform.loanForms.model.LoanForms">
  	update tb_loan_forms
    <set>
      <if test="orgId != null and orgId !='' ">
        org_id = #{orgId},
      </if>
      <if test="regionId != null and regionId != ''">
        region_id = #{regionId},
      </if>
      <if test="la_id != null and la_id != ''">
        la_id = #{la_id},
      </if>
      <if test="fp_id != null and fp_id != ''">
        fp_id = #{fp_id},
      </if>
      <if test="lf_remark != null and lf_remark != ''">
        lf_remark = #{lf_remark},
      </if>
      <if test="creatorid != null and creatorid != ''">
        creatorid = #{creatorid},
      </if>
      <if test="createtime != null">
        createtime = #{createtime},
      </if>
      <if test="updatorid != null and updatorid != ''">
        updatorid = #{updatorid},
      </if>
      <if test="updatetime != null">
        updatetime = now(),
      </if>
    </set>
    where lf_id = #{id}
  </update>
</mapper>