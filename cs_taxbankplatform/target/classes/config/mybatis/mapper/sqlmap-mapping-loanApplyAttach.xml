<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dcits.govsbu.sd.taxbankplatform.loanapplyattach.mapper.LoanApplyAttachMapper">
	<!--mybatis ehcache缓存配置,以下两个<cache>标签二选一,第一个可以输出日志,第二个不输出日志 -->
	<cache type="org.mybatis.caches.ehcache.LoggingEhcache"/> 
	<!-- <cache type="org.mybatis.caches.ehcache.EhcacheCache"/> -->
	
	<resultMap id="LoanApplyAttachMap" type="com.dcits.govsbu.sd.taxbankplatform.loanapplyattach.model.LoanApplyAttach">
		<id property="id" column="laa_id"/>
		<result property="lf_id" column="lf_id" />
		<result property="pdi_id" column="pdi_id"/>
		<result property="pdi_values" column="pdi_values"/>
		<result property="laa_remark" column="laa_remark" />
		<result property="orgId" column="org_id" />
		<result property="regionId" column="region_id" />
		<result column="creatorid" property="creatorid" />
	    <result column="createtime"  property="createtime" />
	    <result column="updatorid" property="updatorid" />
	    <result column="updatetime"  property="updatetime" />
	</resultMap>

	<!-- 插入数据 -->
	<insert id="insert" parameterType="com.dcits.govsbu.sd.taxbankplatform.loanapplyattach.model.LoanApplyAttach">
		insert into tb_loan_apply_attach (
			laa_id,
			org_id,
			region_id,
			lf_id,
			pdi_id,
			pdi_values,
			laa_remark,
			creatorid,
			createtime,
			updatorid,
			updatetime
			)   
		values (
			#{laa_id},
			#{orgId},
			#{regionId},
			#{lf_id},
			#{pdi_id},
			#{pdi_values},
			#{laa_remark},
			#{creatorid},
			 date_format(now(), '%Y-%m-%d %H:%i:%s'),
			#{updatorid},
			 date_format(now(), '%Y-%m-%d %H:%i:%s')
			)  
	</insert>
	<select id="findById" parameterType="String" resultMap="LoanApplyAttachMap" flushCache="true" useCache="true">
		select * from tb_loan_apply_attach
	    where laa_id = #{id}
	</select>
	<select id="queryListByPage" parameterType="map" resultMap="LoanApplyAttachMap" flushCache="true" useCache="true">
		SELECT *
		FROM tb_loan_apply_attach 
		<where>
			<if test="lf_id != null and lf_id != ''">
			lf_id = #{lf_id}
			</if>
		</where>
	</select>
	<update id="update" parameterType="com.dcits.govsbu.sd.taxbankplatform.loanapplyattach.model.LoanApplyAttach">
  	update tb_loan_apply_attach
    <set>
      <if test="orgId != null">
        org_id = #{orgId},
      </if>
      <if test="regionId != null">
        region_id = #{regionId},
      </if>
      <if test="lf_id != null">
        lf_id = #{lf_id},
      </if>
      <if test="pdi_id != null">
        pdi_id = #{pdi_id},
      </if>
      <if test="pdi_values != null">
        pdi_values = #{pdi_values},
      </if>
      <if test="laa_remark != null">
        laa_remark = #{laa_remark},
      </if>
      <if test="creatorid != null">
        creatorid = #{creatorid},
      </if>
      <if test="updatorid != null">
        updatorid = #{updatorid},
      </if>
      <if test="updatetime != null">
        updatetime =  date_format(now(), '%Y-%m-%d %H:%i:%s'),
      </if>
    </set>
    where laa_id = #{id}
  </update>
</mapper>